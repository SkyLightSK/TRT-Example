<div class="device-status-widget">
  <div class="card-header">
    <h2>Device Status</h2>
  </div>
  
  <div class="card-content">
    <ng-container *ngIf="!loading; else loadingTemplate">
      <div *ngIf="deviceStatus" class="status-grid">
        <div class="status-item">
          <div class="status-count">{{deviceStatus.active}}</div>
          <div class="status-label">Active</div>
          <div class="status-bar">
            <div class="status-bar-fill status-good" [style.width.%]="getPercentage(deviceStatus.active)"></div>
          </div>
        </div>
        
        <div class="status-item">
          <div class="status-count">{{deviceStatus.needsAttention}}</div>
          <div class="status-label">Needs Attention</div>
          <div class="status-bar">
            <div class="status-bar-fill status-warning" [style.width.%]="getPercentage(deviceStatus.needsAttention)"></div>
          </div>
        </div>
        
        <div class="status-item">
          <div class="status-count">{{deviceStatus.critical}}</div>
          <div class="status-label">Critical</div>
          <div class="status-bar">
            <div class="status-bar-fill status-critical" [style.width.%]="getPercentage(deviceStatus.critical)"></div>
          </div>
        </div>
        
        <div class="status-item">
          <div class="status-count">{{deviceStatus.endOfLife}}</div>
          <div class="status-label">End of Life</div>
          <div class="status-bar">
            <div class="status-bar-fill status-inactive" [style.width.%]="getPercentage(deviceStatus.endOfLife)"></div>
          </div>
        </div>
      </div>
      
      <div class="total-devices">
        <span>Total Devices: {{deviceStatus?.total || 0}}</span>
      </div>
    </ng-container>
    
    <ng-template #loadingTemplate>
      <div class="loading-container">
        <div class="loading-spinner"></div>
        <p>Loading device status...</p>
      </div>
    </ng-template>
  </div>
  
  <div class="card-footer">
    <a routerLink="/devices" class="view-all-link">View all devices</a>
  </div>
</div>
